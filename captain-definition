{
	"schemaVersion": 2,
	"dockerfileLines": [
		"FROM oven/bun AS build",
		"RUN mkdir -p /usr/src/app",
		"WORKDIR /usr/src/app",
		"COPY package.json package.json",
		"COPY bun.lock bun.lock",
		"RUN bun install --frozen-lockfile --production",
		"COPY ./src ./src",
		"ENV NODE_ENV=production",
		"RUN bun build --compile --minify-whitespace --minify-syntax --target bun --outfile dist/server ./src/index.ts",
		"RUN mkdir -p uploads",
		"EXPOSE 3000",
		"CMD [\"./dist/server\"]"
	]
}
